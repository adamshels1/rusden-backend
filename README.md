# Rusden Backend API

–ü—É–±–ª–∏—á–Ω—ã–π API –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏–∑ Telegram –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã—Ö —ç–∫—Å–ø–∞—Ç–æ–≤ –≤ –¢—É—Ä—Ü–∏–∏.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
cp .env.example .env
# –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
npm run dev
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://localhost:3000

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞, Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:

**http://localhost:3000/api-docs**

## üîó API Endpoints

### Listings (–û–±—ä—è–≤–ª–µ–Ω–∏—è)

#### GET /api/listings
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `category` - –ö–∞—Ç–µ–≥–æ—Ä–∏—è (`realty`, `job`, `service`, `goods`, `event`)
- `city` - –ì–æ—Ä–æ–¥ (–ø–æ–∏—Å–∫ –ø–æ –ø–æ–¥—Å—Ç—Ä–æ–∫–µ)
- `minPrice` - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
- `maxPrice` - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
- `limit` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20, –º–∞–∫—Å 100)
- `offset` - –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –í—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
curl http://localhost:3000/api/listings

# –¢–æ–ª—å–∫–æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å
curl http://localhost:3000/api/listings?category=realty

# –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å –≤ –ê–ª–∞–Ω–∏–∏
curl "http://localhost:3000/api/listings?category=realty&city=Alanya"

# –° —Ü–µ–Ω–æ–≤—ã–º –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º
curl "http://localhost:3000/api/listings?minPrice=10000&maxPrice=50000"
```

#### GET /api/listings/:id
–ü–æ–ª—É—á–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–æ ID

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl http://localhost:3000/api/listings/dd6dfb75-848c-42fe-9654-757f9ac555cb
```

### Health

#### GET /health
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞

## üóÇÔ∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π

- **realty** - –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å (–∞—Ä–µ–Ω–¥–∞, –ø—Ä–æ–¥–∞–∂–∞)
- **job** - –†–∞–±–æ—Ç–∞ –∏ –≤–∞–∫–∞–Ω—Å–∏–∏
- **service** - –£—Å–ª—É–≥–∏ (—é—Ä–∏—Å—Ç—ã, –≤—Ä–∞—á–∏, –º–∞—Å—Ç–µ—Ä–∞)
- **goods** - –¢–æ–≤–∞—Ä—ã (–º–µ–±–µ–ª—å, —Ç–µ—Ö–Ω–∏–∫–∞, –∞–≤—Ç–æ)
- **event** - –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –∏ –≤—Å—Ç—Ä–µ—á–∏

## üåç –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≥–æ—Ä–æ–¥–∞

Istanbul, Antalya, Alanya, Bodrum, Marmaris, Izmir, Ankara, Side, Kemer, Belek

## üß† AI –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è

–í—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é **Groq AI (llama-3.3-70b-versatile)** - –±–µ—Å–ø–ª–∞—Ç–Ω–æ!

–ö–∞–∂–¥–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –∏–º–µ–µ—Ç –ø–æ–ª–µ `ai_confidence` (0-1) - —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å AI –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Node.js + Express + TypeScript
- **Database**: Supabase (PostgreSQL)
- **AI**: Groq llama-3.3-70b-versatile (–±–µ—Å–ø–ª–∞—Ç–Ω–æ!)
- **Parser**: MTProto (Telegram)
- **Hosting**: Vercel
- **API Docs**: Swagger/OpenAPI 3.0

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
rusden-backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config/       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Supabase, Groq, Swagger)
‚îÇ   ‚îú‚îÄ‚îÄ services/     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (AI, parser, listings)
‚îÇ   ‚îú‚îÄ‚îÄ routes/       # API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ jobs/         # Cron jobs –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ types/        # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ app.ts        # Express –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ server.ts     # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ .env              # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ vercel.json       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vercel
‚îî‚îÄ‚îÄ package.json      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# Supabase
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_anon_key

# Groq AI (–±–µ—Å–ø–ª–∞—Ç–Ω–æ!)
GROQ_API_KEY=gsk_your_groq_api_key

# Server
PORT=3000
NODE_ENV=development

# Cron Security
CRON_SECRET=your_random_secret_key
```

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Vercel

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Vercel CLI
npm i -g vercel

# –î–µ–ø–ª–æ–π
vercel

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
vercel env add SUPABASE_URL
vercel env add SUPABASE_ANON_KEY
vercel env add GROQ_API_KEY
vercel env add CRON_SECRET
```

## ‚è±Ô∏è Cron Jobs

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –∫–∞–Ω–∞–ª–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `vercel.json`:

```json
{
  "crons": [
    {
      "path": "/api/cron/parse",
      "schedule": "0 */6 * * *"
    }
  ]
}
```

–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram –∫–∞–Ω–∞–ª–æ–≤.

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Supabase)

### –¢–∞–±–ª–∏—Ü—ã

**channels** - Telegram –∫–∞–Ω–∞–ª—ã
- `id` (UUID) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `telegram_id` (TEXT) - ID –∫–∞–Ω–∞–ª–∞ –≤ Telegram
- `username` (TEXT) - Username –∫–∞–Ω–∞–ª–∞
- `title` (TEXT) - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
- `is_active` (BOOLEAN) - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –∫–∞–Ω–∞–ª

**raw_messages** - –°—ã—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram
- `id` (UUID) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `channel_id` (UUID) - –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª
- `telegram_message_id` (BIGINT) - ID —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram
- `raw_text` (TEXT) - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `author_info` (JSONB) - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≤—Ç–æ—Ä–µ
- `message_date` (TIMESTAMPTZ) - –î–∞—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

**listings** - –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `id` (UUID) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `raw_message_id` (UUID) - –°—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `category` (TEXT) - –ö–∞—Ç–µ–≥–æ—Ä–∏—è
- `title` (TEXT) - –ó–∞–≥–æ–ª–æ–≤–æ–∫
- `description` (TEXT) - –û–ø–∏—Å–∞–Ω–∏–µ
- `price` (NUMERIC) - –¶–µ–Ω–∞
- `currency` (TEXT) - –í–∞–ª—é—Ç–∞ (TRY, USD, EUR)
- `location` (TEXT) - –õ–æ–∫–∞—Ü–∏—è
- `contact_info` (JSONB) - –ö–æ–Ω—Ç–∞–∫—Ç—ã
- `ai_confidence` (NUMERIC) - –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å AI (0-1)

## üìù –°–∫—Ä–∏–ø—Ç—ã

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev

# –°–±–æ—Ä–∫–∞
npm run build

# –ó–∞–ø—É—Å–∫ production
npm start

# –ï–¥–∏–Ω–æ—Ä–∞–∑–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥
npm run parse:once
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## ü§ù –í–∫–ª–∞–¥

Contributions welcome! –û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ Issues –∏ Pull Requests.
